# FileSystem Agent Prompt 改进方案 - Tools插件开发专用版

## 一、核心目标调整

### 原目标 vs 新目标
- ❌ 通用的Dify插件开发
- ✅ **专注于Tools插件开发**
- ❌ 代码质量、文档质量、用户体验
- ✅ **功能实现、信息完整、快速交付**

### 设计原则
1. **实用主义**：能工作就行，先不追求完美
2. **信息第一**：宁可冗余，不可遗漏
3. **快速迭代**：遇到问题立即记录和解决
4. **工具熟练**：充分利用shell和已有工具

## 二、guideline.md 专项改进

### 2.1 关键改进点

#### 明确文件位置
```markdown
# 第一行就说明
> 本文件位于 `{agent_root}/guideline.md`，请务必遵守
```

#### 详细的Tools插件开发流程
1. **完整的命令序列**：每个步骤都给出具体命令
2. **常见错误预防**：如必须加--quick参数
3. **代码模板齐全**：OAuth、错误处理、参数验证等
4. **API模式总结**：不同类型API的通用处理方式

### 2.2 结构设计
```
1. 身份定位（明确只做Tools插件）
2. 核心原则（功能优先）
3. 完整开发流程（6个步骤，每步都有具体命令）
4. 常见问题快速解决
5. Context管理要求（强制记录所有信息）
```

## 三、context_window 专项改进

### 3.1 信息收集机制

#### 必须记录的信息类别
1. **API信息**
   - 文档链接（永远保留）
   - 认证方式和配置
   - 所有用过的endpoint
   - 速率限制规则
   - 返回数据示例

2. **实现细节**
   - 每个参数的验证逻辑
   - 每个错误码的处理方式
   - 数据转换规则
   - 特殊case处理

3. **调试记录**
   - 成功的请求示例
   - 失败的原因分析
   - 性能数据
   - 临时解决方案

#### 信息保留原则
- **只增不减**：除非100%确定永远用不到
- **分类清晰**：便于快速查找
- **及时更新**：新发现立即补充

### 3.2 初始状态设计

让Agent一开始就处于"战斗状态"：
1. **环境就绪**：所有工具和依赖已确认
2. **知识充分**：常用模式和坑点已加载
3. **模板ready**：代码片段可直接复制使用
4. **只等需求**：用户一说就能开始

## 四、实施要点

### 4.1 guideline_tools_plugin_focused.md
- 226行精简到约300行（但都是干货）
- 每个章节都有具体可执行的内容
- 命令可以直接复制粘贴运行
- 错误处理覆盖所有已知场景

### 4.2 context_window_tools_ready.md  
- 预置所有常用信息
- 提供待填充的模板
- 包含立即可用的代码片段
- 清晰的进度跟踪机制

### 4.3 关键差异

#### 与通用版本的区别
1. **删除了**：代码质量标准、用户体验要求、文档完整性检查
2. **强化了**：具体命令、代码模板、错误处理、信息收集
3. **新增了**：API信息库、已知坑点、立即可用的代码片段

## 五、使用场景

### 理想工作流程
1. 用户：我要开发一个XX服务的插件
2. Agent：立即查看context中的模板，创建项目
3. Agent：调研API，记录所有信息到context
4. Agent：快速实现第一个工具，测试连通性
5. Agent：基于成功经验，快速复制实现其他工具
6. Agent：遇到错误立即记录，下次避免

### 预期效果
- **开发速度**：从思考30分钟减少到5分钟开始编码
- **错误减少**：已知错误100%避免
- **信息完整**：所有细节都被记录，便于复用
- **快速交付**：专注功能实现，2小时内完成基础插件

## 六、维护建议

### 持续优化
1. **每个项目后更新**：新发现的坑点、有用的模式
2. **保持精简**：删除过时信息，但要谨慎
3. **版本控制**：定期备份，便于回滚

### 质量vs速度
- 当前阶段：**速度 > 质量**
- 积累经验后：逐步提升质量标准
- 最终目标：又快又好

## 七、示例对比

### 通用版本的重点
```markdown
## 质量标准
- ✅ 代码规范
- ✅ 完整测试  
- ✅ 文档齐全
- ✅ 用户体验优秀
```

### Tools插件专用版的重点
```markdown
## 快速实现
- ✅ 能调通API就行
- ✅ 错误有处理就行
- ✅ README有基本说明就行
- ✅ 先跑起来再说
```

## 八、总结

这个改进方案的核心是：
1. **专注**：只做Tools插件，其他都不管
2. **实用**：能用就行，完美是以后的事
3. **完整**：信息收集要全，一个都不能少
4. **快速**：2小时出成果，不是2天

通过这种方式，Agent可以快速响应用户需求，高效产出可用的Tools插件。